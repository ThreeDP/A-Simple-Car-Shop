@page "/clientes"
@inject HttpClient Http
@using CarShopView.Models;

<PageTitle>Clientes</PageTitle>

<h1>Clientes</h1>
@* 
<p role="status">Current count: @currentCount</p> *@

<EditForm Model="@client" OnValidSubmit="@HandleInsertClientSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group mt-3">
        <label for="name">Name:</label>
        <InputText id="name" class="form-control" @bind-Value="@client.Name" />
        <ValidationMessage For="@(() => client.Name)" />
    </div>

    <div class="form-group mt-3">
        <label for="url">Image de Perfil:</label>
        <InputText id="url" class="form-control" @bind-Value="@client.UrlImage" />
        <ValidationMessage For="@(() => client.UrlImage)" />
    </div>

    <div class="form-group mt-3">
        <label for="documentType">Tipo de Documento:</label>
        <InputSelect id="documentType" class="form-control" @bind-Value="client.DocType">
            <option value="">Selecione uma opção</option>
            <option value="CPF">CPF</option>
            <option value="CNPJ">CNPJ</option>
        </InputSelect>
        <ValidationMessage For="@(() => client.DocType)" />
    </div>

    <div class="form-group mt-3">
        <label for="documentNumber">Número do documento:</label>
        <InputText id="documentNumber" class="form-control" @bind-Value="@client.DocNumber" />
        <ValidationMessage For="@(() => client.DocNumber)" />
    </div>

    <div class="form-group mt-3">
        <label for="cellphone">Celular:</label>
        <InputText id="cellphone" class="form-control" @bind-Value="@client.CellPhone" />
        <ValidationMessage For="@(() => client.CellPhone)" />
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-success">Submit</button>
    </div>
</EditForm>

@code {
    private Client client = new Client();

    private async void HandleInsertClientSubmit()
    {
        var ts = await Http.PostAsJsonAsync("clientes", client);
        Console.WriteLine(ts);
    }
}

@* <button class="btn btn-primary" @onclick="IncrementCount">Click me</button> *@

@* @code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }
} *@
